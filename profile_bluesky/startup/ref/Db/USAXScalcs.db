# USAXScalcs.db
# moved into USAXS VME 2005-05-20
# converted to 32ID-B PVs 2006-10-24
# fixed some changes 15ID 2011-07-08 JIL
#
grecord(swait, "9idcLAX:USAXS:Q")
{
	field(DESC, "USAXS |Q|, 1/A")
	field(PREC, "6")
	field(SCAN, "9")
	field(INAP, "1")
	field(INBP, "1")
	field(INCP, "1")
	field(INAN, "9idcLAX:aero:c0:m1.RBV")
	field(B,    "")
	field(INCN, "9ida:BraggLambdaAO")
	field(CALC, "4*PI*SIN(ABS(A-B)*PI/360)/C")
}
grecord(swait, "9idcLAX:USAXS:I")
{
	field(DESC, "normalized USAXS intensity")
	field(PREC, "3")
	field(SCAN, "9")
	field(INAP, "1")
	field(INBP, "1")
	field(INCP, "1")
	field(INDP, "1")
	field(INEP, "1")
	field(INFP, "1")
	field(INAN, "")
	field(INBN, "9idcLAX:vsc:c0_cts1.B")
	field(INCN, "9idcLAX:vsc:c0_cts1.A")
	field(INDN, "9idcLAX:vsc:c0.FREQ")
	field(INEN, "9idcUSX:pd01:seq02:lucurrent")
	field(INFN, "")
	field(INGN, "PA:09ID:STA_B_SBS_OPEN_PL")
	field(INHN, "9idcLAX:bit19")
	field(CALC, "((G&&(B>3000))?E:0)/(B/(C/D))*H")
}
grecord(swait, "9idcLAX:USAXS:BeamNotAvailable") {
        field(INAP, "1")
	field(INBP, "1")
	field(INCP, "1")
	field(INDP, "1")
	field(INEP, "1")
	field(INFP, "1")
	field(INGP, "1")
	field(INHP, "1")
	field(INAN, "PA:09ID:STA_A_FES_OPEN_PL")
	field(INBN, "PA:09ID:STA_B_SBS_OPEN_PL")
	field(INCN, "S:SRcurrentAI")
	field(INDN, "ID09ds:Energy")
	field(INEN, "9ida:BraggEAO")
	field(INFN, "9idcUSX:pf4:trans")
	field(INGN, "9idcLAX:USAXS:minI")
	field(INHN, "9idcLAX:USAXS:maxEDiff")
	field(CALC, "!(A&&B&&(C>G)&&(ABS(D-E)<H))")
        field(SCAN, "I/O Intr")
	field(PREC, "5")
	}
grecord(swait, "9idcLAX:USAXS:BeamActive") {
        field(INAP, "1")
	field(INBP, "1")
	field(INCP, "1")
	field(INDP, "1")
	field(INEP, "1")
	field(INFP, "1")
	field(INGP, "1")
	field(INHP, "1")
	field(INAN, "PA:09ID:STA_A_FES_OPEN_PL")
	field(INBN, "PA:09ID:STA_B_SBS_OPEN_PL")
	field(INCN, "S:SRcurrentAI")
	field(INDN, "ID09ds:Energy")
	field(INEN, "9ida:BraggEAO")
	field(INFN, "")
	field(INGN, "9idcLAX:USAXS:minI")
	field(INHN, "9idcLAX:USAXS:maxEDiff")
        field(SCAN, "I/O Intr")
	field(CALC, "A&&B&&(C>G)&&(ABS(D-E)<H)")
	field(PREC, "5")
	}
grecord(swait, "9idcLAX:USAXS:10HzClock") {
        field(INAP, "1")
	field(INBP, "1")
	field(INCP, "1")
	field(INAN, "9idcLAX:USAXS:10HzClock.VAL")
	field(INBN, "9idcLAX:USAXS:10HzClock.C")
	field(INCN, "9idcUSX:pzt:m2.VAL")
	field(CALC, "((B=C)&(A+1<36000))?A+1:0")
	field(SCAN, ".1 second")
	field(PREC, "5")
}
#grecord(swait, "9idcLAX:USAXS:ScalerCountEvent") {
#        field(INAP, "1")
#	field(INBP, "1")
#	field(INCP, "1")
#	field(INDP, "1")
#	field(INAN, "9idcLAX:USAXS:ScalerCountEvent.B")
#	field(INBN, "9idcUSX:scaler1.CNT")
#	field(INCN, "9idcLAX:USAXS:ScalerCountEvent.VAL")
#	field(CALC, "((A=B)&(C<D))?C:C+1")
#        field(SCAN, "I/O Intr")
#	field(PREC, "5")
#	}
grecord(swait, "9idcLAX:USAXS:BeamNotInHutch") {
        field(INAP, "1")
	field(INAN, "15iddMIR:ath0:ana01:ai01.VAL")
	field(CALC, "A<0.2")
        field(SCAN, "I/O Intr")
	field(PREC, "5")
	}
grecord(swait, "9idcLAX:USAXS:BeamInHutch") {
        field(INAP, "1")
	field(INAN, "15iddMIR:ath0:ana01:ai01.VAL CP NMS")
	field(CALC, "A>0.2")
        field(SCAN, "I/O Intr")
	field(PREC, "5")
	}

grecord(ao, "9idcLAX:USAXS:minI") {}
grecord(ao, "9idcLAX:USAXS:maxEDiff") {}
